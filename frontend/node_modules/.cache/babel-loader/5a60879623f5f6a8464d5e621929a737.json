{"ast":null,"code":"import _classCallCheck from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { createPortal } from 'react-dom';\nimport MapComponent from './MapComponent';\nimport updateClassName from './utils/updateClassName';\n\nvar DivOverlay =\n/*#__PURE__*/\nfunction (_MapComponent) {\n  _inherits(DivOverlay, _MapComponent);\n\n  function DivOverlay(props) {\n    var _this;\n\n    _classCallCheck(this, DivOverlay);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DivOverlay).call(this, props));\n\n    _this.onClose = function () {\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.onOpen = function () {\n      _this.forceUpdate(); // Re-render now that leafletElement is created\n\n\n      if (_this.props.onOpen) {\n        _this.props.onOpen();\n      }\n    };\n\n    _this.leafletElement = _this.createLeafletElement(props);\n    return _this;\n  }\n\n  _createClass(DivOverlay, [{\n    key: \"createLeafletElement\",\n    value: function createLeafletElement(_props) {\n      throw new Error('createLeafletElement() must be implemented');\n    }\n  }, {\n    key: \"updateLeafletElement\",\n    value: function updateLeafletElement(_prevProps, _props) {}\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      updateClassName(this.leafletElement._container, prevProps.className, this.props.className);\n      this.updateLeafletElement(prevProps, this.props);\n\n      if (this.leafletElement.isOpen()) {\n        this.leafletElement.update();\n        this.onRender();\n      }\n    }\n  }, {\n    key: \"onRender\",\n    value: function onRender() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.leafletElement._contentNode) {\n        return createPortal(this.props.children, this.leafletElement._contentNode);\n      }\n\n      return null;\n    }\n  }]);\n\n  return DivOverlay;\n}(MapComponent);\n\nexport { DivOverlay as default };","map":{"version":3,"sources":["/home/pul/hab_ews/frontend/hab_ews/src/leaflet/src/DivOverlay.js"],"names":["createPortal","MapComponent","updateClassName","DivOverlay","props","onClose","onOpen","forceUpdate","leafletElement","createLeafletElement","_props","Error","_prevProps","prevProps","_container","className","updateLeafletElement","isOpen","update","onRender","_contentNode","children"],"mappings":";;;;;AAEA,SAASA,YAAT,QAA6B,WAA7B;AAEA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,eAAP,MAA4B,yBAA5B;;IAUqBC,U;;;;;AAInB,sBAAYC,KAAZ,EAA0B;AAAA;;AAAA;;AACxB,oFAAMA,KAAN;;AADwB,UA0B1BC,OA1B0B,GA0BhB,YAAM;AACd,UAAI,MAAKD,KAAL,CAAWC,OAAf,EAAwB;AACtB,cAAKD,KAAL,CAAWC,OAAX;AACD;AACF,KA9ByB;;AAAA,UAgC1BC,MAhC0B,GAgCjB,YAAM;AACb,YAAKC,WAAL,GADa,CACM;;;AACnB,UAAI,MAAKH,KAAL,CAAWE,MAAf,EAAuB;AACrB,cAAKF,KAAL,CAAWE,MAAX;AACD;AACF,KArCyB;;AAExB,UAAKE,cAAL,GAAsB,MAAKC,oBAAL,CAA0BL,KAA1B,CAAtB;AAFwB;AAGzB;;;;yCAEoBM,M,EAAe;AAClC,YAAM,IAAIC,KAAJ,CAAU,4CAAV,CAAN;AACD;;;yCAEoBC,U,EAAmBF,M,EAAe,CAAE;;;uCAEtCG,S,EAAkB;AACnCX,MAAAA,eAAe,CACb,KAAKM,cAAL,CAAoBM,UADP,EAEbD,SAAS,CAACE,SAFG,EAGb,KAAKX,KAAL,CAAWW,SAHE,CAAf;AAMA,WAAKC,oBAAL,CAA0BH,SAA1B,EAAqC,KAAKT,KAA1C;;AAEA,UAAI,KAAKI,cAAL,CAAoBS,MAApB,EAAJ,EAAkC;AAChC,aAAKT,cAAL,CAAoBU,MAApB;AACA,aAAKC,QAAL;AACD;AACF;;;+BAeU,CAAE;;;6BAEJ;AACP,UAAI,KAAKX,cAAL,CAAoBY,YAAxB,EAAsC;AACpC,eAAOpB,YAAY,CAAC,KAAKI,KAAL,CAAWiB,QAAZ,EAAsB,KAAKb,cAAL,CAAoBY,YAA1C,CAAnB;AACD;;AACD,aAAO,IAAP;AACD;;;;EA/COnB,Y;;SAHWE,U","sourcesContent":["// @flow\n\nimport { createPortal } from 'react-dom'\n\nimport MapComponent from './MapComponent'\nimport updateClassName from './utils/updateClassName'\nimport type { DivOverlayProps } from './types'\n\ntype DivOverlayTypes = {\n  _container: HTMLDivElement,\n  _contentNode: HTMLDivElement,\n  isOpen: () => boolean,\n  update: () => void,\n}\n\nexport default class DivOverlay<\n  LeafletElement,\n  Props: DivOverlayProps,\n> extends MapComponent<LeafletElement & DivOverlayTypes, Props> {\n  constructor(props: Props) {\n    super(props)\n    this.leafletElement = this.createLeafletElement(props)\n  }\n\n  createLeafletElement(_props: Props) {\n    throw new Error('createLeafletElement() must be implemented')\n  }\n\n  updateLeafletElement(_prevProps: Props, _props: Props) {}\n\n  componentDidUpdate(prevProps: Props) {\n    updateClassName(\n      this.leafletElement._container,\n      prevProps.className,\n      this.props.className,\n    )\n\n    this.updateLeafletElement(prevProps, this.props)\n\n    if (this.leafletElement.isOpen()) {\n      this.leafletElement.update()\n      this.onRender()\n    }\n  }\n\n  onClose = () => {\n    if (this.props.onClose) {\n      this.props.onClose()\n    }\n  }\n\n  onOpen = () => {\n    this.forceUpdate() // Re-render now that leafletElement is created\n    if (this.props.onOpen) {\n      this.props.onOpen()\n    }\n  }\n\n  onRender() {}\n\n  render() {\n    if (this.leafletElement._contentNode) {\n      return createPortal(this.props.children, this.leafletElement._contentNode)\n    }\n    return null\n  }\n}\n"]},"metadata":{},"sourceType":"module"}