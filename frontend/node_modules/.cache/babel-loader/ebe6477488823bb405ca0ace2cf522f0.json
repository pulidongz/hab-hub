{"ast":null,"code":"import _objectWithoutProperties from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/home/pul/hab_ews/frontend/hab_ews/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { TileLayer } from 'leaflet';\nimport isEqual from 'fast-deep-equal';\nimport { withLeaflet } from './context';\nimport GridLayer from './GridLayer';\nimport { EVENTS_RE } from './MapEvented';\n\nvar WMSTileLayer =\n/*#__PURE__*/\nfunction (_GridLayer) {\n  _inherits(WMSTileLayer, _GridLayer);\n\n  function WMSTileLayer() {\n    _classCallCheck(this, WMSTileLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WMSTileLayer).apply(this, arguments));\n  }\n\n  _createClass(WMSTileLayer, [{\n    key: \"createLeafletElement\",\n    value: function createLeafletElement(props) {\n      var url = props.url,\n          params = _objectWithoutProperties(props, [\"url\"]);\n\n      return new TileLayer.WMS(url, this.getOptions(params));\n    }\n  }, {\n    key: \"updateLeafletElement\",\n    value: function updateLeafletElement(fromProps, toProps) {\n      _get(_getPrototypeOf(WMSTileLayer.prototype), \"updateLeafletElement\", this).call(this, fromProps, toProps);\n\n      var prevUrl = fromProps.url,\n          _po = fromProps.opacity,\n          _pz = fromProps.zIndex,\n          prevParams = _objectWithoutProperties(fromProps, [\"url\", \"opacity\", \"zIndex\"]);\n\n      var url = toProps.url,\n          _o = toProps.opacity,\n          _z = toProps.zIndex,\n          params = _objectWithoutProperties(toProps, [\"url\", \"opacity\", \"zIndex\"]);\n\n      if (url !== prevUrl) {\n        this.leafletElement.setUrl(url);\n      }\n\n      if (!isEqual(params, prevParams)) {\n        this.leafletElement.setParams(params);\n      }\n    }\n  }, {\n    key: \"getOptions\",\n    value: function getOptions(params) {\n      var superOptions = _get(_getPrototypeOf(WMSTileLayer.prototype), \"getOptions\", this).call(this, params);\n\n      return Object.keys(superOptions).reduce(function (options, key) {\n        if (!EVENTS_RE.test(key)) {\n          options[key] = superOptions[key];\n        }\n\n        return options;\n      }, {});\n    }\n  }]);\n\n  return WMSTileLayer;\n}(GridLayer);\n\nexport default withLeaflet(WMSTileLayer);","map":{"version":3,"sources":["/home/pul/hab_ews/frontend/hab_ews/src/leaflet/src/WMSTileLayer.js"],"names":["TileLayer","isEqual","withLeaflet","GridLayer","EVENTS_RE","WMSTileLayer","props","url","params","WMS","getOptions","fromProps","toProps","prevUrl","_po","opacity","_pz","zIndex","prevParams","_o","_z","leafletElement","setUrl","setParams","superOptions","Object","keys","reduce","options","key","test"],"mappings":";;;;;;;AAEA,SAASA,SAAT,QAA0B,SAA1B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AAEA,SAASC,WAAT,QAA4B,WAA5B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,SAAT,QAA0B,cAA1B;;IAMMC,Y;;;;;;;;;;;;;yCACiBC,K,EAA8B;AAAA,UACzCC,GADyC,GACtBD,KADsB,CACzCC,GADyC;AAAA,UACjCC,MADiC,4BACtBF,KADsB;;AAEjD,aAAO,IAAIN,SAAS,CAACS,GAAd,CAAkBF,GAAlB,EAAuB,KAAKG,UAAL,CAAgBF,MAAhB,CAAvB,CAAP;AACD;;;yCAEoBG,S,EAAkBC,O,EAAgB;AACrD,6FAA2BD,SAA3B,EAAsCC,OAAtC;;AADqD,UAGxCC,OAHwC,GAGcF,SAHd,CAG7CJ,GAH6C;AAAA,UAGtBO,GAHsB,GAGcH,SAHd,CAG/BI,OAH+B;AAAA,UAGTC,GAHS,GAGcL,SAHd,CAGjBM,MAHiB;AAAA,UAGDC,UAHC,4BAGcP,SAHd;;AAAA,UAI7CJ,GAJ6C,GAIDK,OAJC,CAI7CL,GAJ6C;AAAA,UAI/BY,EAJ+B,GAIDP,OAJC,CAIxCG,OAJwC;AAAA,UAInBK,EAJmB,GAIDR,OAJC,CAI3BK,MAJ2B;AAAA,UAIZT,MAJY,4BAIDI,OAJC;;AAMrD,UAAIL,GAAG,KAAKM,OAAZ,EAAqB;AACnB,aAAKQ,cAAL,CAAoBC,MAApB,CAA2Bf,GAA3B;AACD;;AACD,UAAI,CAACN,OAAO,CAACO,MAAD,EAASU,UAAT,CAAZ,EAAkC;AAChC,aAAKG,cAAL,CAAoBE,SAApB,CAA8Bf,MAA9B;AACD;AACF;;;+BAEUA,M,EAAwB;AACjC,UAAMgB,YAAY,gFAAoBhB,MAApB,CAAlB;;AACA,aAAOiB,MAAM,CAACC,IAAP,CAAYF,YAAZ,EAA0BG,MAA1B,CAAiC,UAACC,OAAD,EAAUC,GAAV,EAAkB;AACxD,YAAI,CAACzB,SAAS,CAAC0B,IAAV,CAAeD,GAAf,CAAL,EAA0B;AACxBD,UAAAA,OAAO,CAACC,GAAD,CAAP,GAAeL,YAAY,CAACK,GAAD,CAA3B;AACD;;AACD,eAAOD,OAAP;AACD,OALM,EAKJ,EALI,CAAP;AAMD;;;;EA5BwBzB,S;;AA+B3B,eAAeD,WAAW,CAAsBG,YAAtB,CAA1B","sourcesContent":["// @flow\n\nimport { TileLayer } from 'leaflet'\nimport isEqual from 'fast-deep-equal'\n\nimport { withLeaflet } from './context'\nimport GridLayer from './GridLayer'\nimport { EVENTS_RE } from './MapEvented'\nimport type { GridLayerProps } from './types'\n\ntype LeafletElement = TileLayer.WMS\ntype Props = { url: string } & GridLayerProps\n\nclass WMSTileLayer extends GridLayer<LeafletElement, Props> {\n  createLeafletElement(props: Props): LeafletElement {\n    const { url, ...params } = props\n    return new TileLayer.WMS(url, this.getOptions(params))\n  }\n\n  updateLeafletElement(fromProps: Props, toProps: Props) {\n    super.updateLeafletElement(fromProps, toProps)\n\n    const { url: prevUrl, opacity: _po, zIndex: _pz, ...prevParams } = fromProps\n    const { url, opacity: _o, zIndex: _z, ...params } = toProps\n\n    if (url !== prevUrl) {\n      this.leafletElement.setUrl(url)\n    }\n    if (!isEqual(params, prevParams)) {\n      this.leafletElement.setParams(params)\n    }\n  }\n\n  getOptions(params: Object): Object {\n    const superOptions = super.getOptions(params)\n    return Object.keys(superOptions).reduce((options, key) => {\n      if (!EVENTS_RE.test(key)) {\n        options[key] = superOptions[key]\n      }\n      return options\n    }, {})\n  }\n}\n\nexport default withLeaflet<Props, WMSTileLayer>(WMSTileLayer)\n"]},"metadata":{},"sourceType":"module"}